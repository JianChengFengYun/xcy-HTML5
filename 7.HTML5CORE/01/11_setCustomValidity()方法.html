<!DOCTYPE html>
<html>
 <head>
  <title>setCustomValidity()方法</title>
  <meta charset="utf-8" />
 </head>

 <body>
  <form>
	用户名:<input type="text" id="user" required>
	<input type="submit">
  </form>
  <script>
	/*
	 * setCustomValidity()方法
	 * * 作用 - 修改验证错误后的默认提示信息
	 * * 问题
	 *   * 一旦使用该方法修改默认错误提示信息后
	 *     即使输入正确,错误提示依旧存在(逻辑错误)
	 * * 解决
	 *   * 判断如果用户输入正确的话,将该方法设置提示内容修改为空
	 * * 问题
	 *   * 使用valid状态判断输入是否正确
	 *     * 一旦使用该方法,validityState对象的所有状态都返回false
	 */
	var user = document.getElementById("user");
	user.onblur = function(){
		//user.value == "" || user.value == null
		if(user.value != "" && user.value != null){
			user.setCustomValidity("");
		}else if(user.validity.valueMissing){
			user.setCustomValidity("用户名不能为空");
		}
	}
  </script>
 </body>
</html>