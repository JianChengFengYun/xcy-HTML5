<!DOCTYPE html>
<html>
 <head>
  <title>表单新验证案例</title>
  <meta charset="utf-8" />
 </head>

 <body>
  <fieldset>
	<legend>用户注册页面</legend>
	<form>
		<table>
			<tr>
				<td>用户名:</td>
				<td><input type="text" id="user" autofocus placeholder="请输入用户名" required pattern="[a-zA-Z0-9]{6,12}"></td>
			</tr>
			<tr>
				<td>密码:</td>
				<td><input type="password" id="pwd" placeholder="请输入密码" required pattern="[a-zA-Z]{6,8}"></td>
			</tr>
			<tr>
				<td>确认密码:</td>
				<td><input type="password" id="repwd" placeholder="请确认密码" required pattern="[a-zA-Z]{6,8}"></td>
			</tr>
			<tr>
				<td>email地址:</td>
				<td><input type="email" id="email" placeholder="请输入email" required></td>
			</tr>
			<tr>
				<td>个人主页:</td>
				<td><input type="url" id="url" placeholder="请输入个人主页" required></td>
			</tr>
			<tr>
				<td>年龄:</td>
				<td><input type="number" min="0" max="100" placeholder="请输入个人主页"></td>
			</tr>
			<tr>
				<td>出生日期:</td>
				<td><input type="date"></td>
			</tr>
			<tr>
				<td></td>
				<td><input type="submit" value="注册"></td>
			</tr>
		</table>
	</form>
  </fieldset>
  <script>
	/*
	 * 需求
	 * * 用户名
	 *   * 验证条件 - 不能为空,只能输入英文+数字,长度在6-12之间
	 *   * 条件 - 验证失败,重新设置错误提示
	 * * 密码
	 *   * 验证条件 - 不能为空,只能输入英文,长度在6-8之间
	 *   * 条件 - 验证失败,重新设置错误提示
	 * * 确认密码
	 *   * 验证条件 - 不能为空,只能输入英文,长度在6-8之间(两次密码输入一致)
	 *   * 条件 - 验证失败,重新设置错误提示
	 * * email地址
	 *   * 验证条件 - 不能为空,类型符合
	 *   * 条件 - 验证失败,重新设置错误提示
	 * * 个人主页
	 *   * 验证条件 - 不能为空,类型符合
	 *   * 条件 - 验证失败,重新设置错误提示
	 * * 年龄
	 *   * 验证条件 - 不能为空,值不能小于min,step符合
	 *   * 条件 - 验证失败,重新设置错误提示
	 * * 出生日期
	 *   * 验证条件 - 不能为空
	 *   * 条件 - 验证失败,重新设置错误提示
	 * * 统一要求
	 *   * 所有元素验证通过,给出正确提示
	 */
	var user = document.getElementById("user");
	user.onblur = function(){
		//user.value == "" || user.value == null
		if(user.value != "" && user.value != null){
			user.setCustomValidity("");
		}else if(user.validity.valueMissing){
			user.setCustomValidity("用户名不能为空");
		}
	}

	var pwd = document.getElementById("pwd");
	pwd.onblur = function(){
		if(pwd.validity.patternMismatch){
			alert("密码不符合规则");
		}
	}

	var repwd = document.getElementById("repwd");
	repwd.onblur = function(){
		if(repwd.value!=pwd.value){
			alert("密码输入不一致");
		};
	}

	var email = document.getElementById("email");
	email.onblur = function(){
		if(email.validity.typeMismatch){
			alert("email输入错误");
		};
	}

	var url = document.getElementById("url");
	url.onblur = function(){
		if(url.validity.valid){
			alert("输入正确");
		}
		else if(url.validity.typeMismatch){
			alert("url输入错误");
		};
	}
  </script>
 </body>
</html>